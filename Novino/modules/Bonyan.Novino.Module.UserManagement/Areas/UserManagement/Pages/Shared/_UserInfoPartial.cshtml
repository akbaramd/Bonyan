@model UserDetailsViewModel

<div class="row">
    <div class="col-12">
        <!-- User Information Card -->
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="card-title mb-0">
                    <i class="ri-user-settings-line me-2"></i>اطلاعات کاربر
                </h5>
                <div class="d-flex gap-2">
                    @if (Model.CanEdit)
                    {
                        <a href="@Url.Page("/User/Edit", new { id = Model.Id, area = "UserManagement" })" 
                           class="btn btn-primary btn-sm">
                            <i class="ri-edit-line align-bottom me-1"></i>ویرایش
                        </a>
                    }
                    <button type="button" class="btn btn-outline-secondary btn-sm" onclick="refreshUserInfo()">
                        <i class="ri-refresh-line align-bottom me-1"></i>بازنشانی
                    </button>
                </div>
            </div>
            <div class="card-body">
                <div class="row">
                    <!-- Basic Information -->
                    <div class="col-lg-6">
                        <div class="mb-4">
                            <h6 class="text-muted mb-3">
                                <i class="ri-user-line me-2"></i>اطلاعات پایه
                            </h6>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <div class="d-flex align-items-center p-3 border rounded">
                                        <div class="avatar-sm bg-primary-subtle rounded me-3">
                                            <div class="avatar-title">
                                                <i class="ri-user-line text-primary"></i>
                                            </div>
                                        </div>
                                        <div>
                                            <small class="text-muted d-block">نام کاربری</small>
                                            <span class="fw-semibold">@Model.UserName</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="d-flex align-items-center p-3 border rounded">
                                        <div class="avatar-sm bg-success-subtle rounded me-3">
                                            <div class="avatar-title">
                                                <i class="ri-user-line text-success"></i>
                                            </div>
                                        </div>
                                        <div>
                                            <small class="text-muted d-block">نام و نام خانوادگی</small>
                                            <span class="fw-semibold">@Model.FullName</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="d-flex align-items-center p-3 border rounded">
                                        <div class="avatar-sm bg-info-subtle rounded me-3">
                                            <div class="avatar-title">
                                                <i class="ri-mail-line text-info"></i>
                                            </div>
                                        </div>
                                        <div>
                                            <small class="text-muted d-block">ایمیل</small>
                                            @if (!string.IsNullOrEmpty(Model.Email))
                                            {
                                                <div class="d-flex align-items-center">
                                                    <a href="mailto:@Model.Email" class="fw-semibold text-decoration-none">@Model.Email</a>
                                                    @if (Model.EmailConfirmed)
                                                    {
                                                        <span class="badge bg-success-subtle text-success ms-2">
                                                            <i class="ri-check-line"></i>
                                                        </span>
                                                    }
                                                </div>
                                            }
                                            else
                                            {
                                                <span class="text-muted">تعیین نشده</span>
                                            }
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="d-flex align-items-center p-3 border rounded">
                                        <div class="avatar-sm bg-warning-subtle rounded me-3">
                                            <div class="avatar-title">
                                                <i class="ri-phone-line text-warning"></i>
                                            </div>
                                        </div>
                                        <div>
                                            <small class="text-muted d-block">شماره تلفن</small>
                                            @if (!string.IsNullOrEmpty(Model.PhoneNumber))
                                            {
                                                <div class="d-flex align-items-center">
                                                    <a href="tel:@Model.PhoneNumber" class="fw-semibold text-decoration-none">@Model.PhoneNumber</a>
                                                    @if (Model.PhoneNumberConfirmed)
                                                    {
                                                        <span class="badge bg-success-subtle text-success ms-2">
                                                            <i class="ri-check-line"></i>
                                                        </span>
                                                    }
                                                </div>
                                            }
                                            else
                                            {
                                                <span class="text-muted">تعیین نشده</span>
                                            }
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Account Status -->
                    <div class="col-lg-6">
                        <div class="mb-4">
                            <h6 class="text-muted mb-3">
                                <i class="ri-shield-check-line me-2"></i>وضعیت حساب
                            </h6>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <div class="d-flex align-items-center p-3 border rounded">
                                        <div class="avatar-sm bg-success-subtle rounded me-3">
                                            <div class="avatar-title">
                                                <i class="ri-checkbox-circle-line text-success"></i>
                                            </div>
                                        </div>
                                        <div>
                                            <small class="text-muted d-block">وضعیت</small>
                                            @if (Model.IsActive)
                                            {
                                                <span class="badge bg-success-subtle text-success">فعال</span>
                                            }
                                            else if (Model.IsLocked)
                                            {
                                                <span class="badge bg-warning-subtle text-warning">قفل شده</span>
                                            }
                                            else
                                            {
                                                <span class="badge bg-danger-subtle text-danger">غیرفعال</span>
                                            }
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="d-flex align-items-center p-3 border rounded">
                                        <div class="avatar-sm bg-danger-subtle rounded me-3">
                                            <div class="avatar-title">
                                                <i class="ri-error-warning-line text-danger"></i>
                                            </div>
                                        </div>
                                        <div>
                                            <small class="text-muted d-block">تلاش‌های ناموفق</small>
                                            <span class="fw-semibold">@Model.FailedLoginAttempts</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="d-flex align-items-center p-3 border rounded">
                                        <div class="avatar-sm bg-info-subtle rounded me-3">
                                            <div class="avatar-title">
                                                <i class="ri-calendar-line text-info"></i>
                                            </div>
                                        </div>
                                        <div>
                                            <small class="text-muted d-block">تاریخ ایجاد</small>
                                            <span class="fw-semibold">@Model.CreatedAtFormatted</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="d-flex align-items-center p-3 border rounded">
                                        <div class="avatar-sm bg-primary-subtle rounded me-3">
                                            <div class="avatar-title">
                                                <i class="ri-time-line text-primary"></i>
                                            </div>
                                        </div>
                                        <div>
                                            <small class="text-muted d-block">آخرین ورود</small>
                                            <span class="fw-semibold">@Model.LastLoginFormatted</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                @if (Model.AccountLockedUntil.HasValue || Model.BannedUntil.HasValue)
                {
                    <div class="row">
                        <div class="col-12">
                            <div class="alert alert-warning">
                                <h6 class="alert-heading">
                                    <i class="ri-alert-line me-2"></i>هشدارهای امنیتی
                                </h6>
                                <div class="row g-3">
                                    @if (Model.AccountLockedUntil.HasValue)
                                    {
                                        <div class="col-md-6">
                                            <small class="text-muted d-block">قفل شده تا</small>
                                            <span class="fw-semibold">@Model.AccountLockedUntil.Value.ToString("yyyy/MM/dd HH:mm")</span>
                                        </div>
                                    }
                                    @if (Model.BannedUntil.HasValue)
                                    {
                                        <div class="col-md-6">
                                            <small class="text-muted d-block">مسدود شده تا</small>
                                            <span class="fw-semibold">@Model.BannedUntil.Value.ToString("yyyy/MM/dd HH:mm")</span>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>


    </div>
</div>

<script>
    function refreshUserInfo() {
        // Reload the user info tab content
        const userInfoTab = document.getElementById('user-info');
        if (userInfoTab) {
            location.reload();
        }
    }
</script> 